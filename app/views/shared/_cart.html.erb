<details id='current-cart-details' data-controller='cart-details'
  class="table-responsive bg-white w-100">
  <summary class='fw-bolder p-2 border-bottom border-2 border-dark'
    data-action='click->cart-details#toggle'>
    Cart total: <%= price_format(cart.total_price) %>
  </summary>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">Item</th>
        <th scope="col">Price</th>
        <th scope="col">Quantity</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <% cart.line_items.order(:created_at).each do |item| %>
      <tr class="<% if @new_item&.id == item.id %>added<% end %>">
        <td><%= item.product.name %></td>
        <td><%= price_format(item.price) %></td>
        <td> x <%= item.quantity %></td>
        <td>
          <%= button_to 'remove', line_item_path(item), method: :delete,
            class: 'btn btn-sm border-0 bg-white text-decoration-underline' %>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>

  <section class='d-flex justify-content-between p-3'>
    <%= button_to 'Empty my cart',
    cart_url(cart), method: :delete, data: { confirm: 'Are you sure?'},
    form: { class: "d-inline" }, class: "border-0 bg-white text-decoration-underline" %>
    <%= link_to 'Checkout', checkout_path %>
  </section>
</details>
